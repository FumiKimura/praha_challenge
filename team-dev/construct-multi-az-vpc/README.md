# マルチ AZ に跨る VPC を構築する

## 課題 1

### プライベートサブネットとパブリックサブネットの違いを説明してください

- パブリックサブネット
  - 外部と通信が可能なネットワーク環境
  - 具体的にはルートテーブルにインターネットゲートウェイがアタッチされている
- プライベートサブネット
  - インターネット(外部)との通信が可能ではない
  - インターネットゲートウェイがないため NATGateway などが必要

### VPC 構築課題

- VPC にプライベートサブネットとパブリックサブネットをマルチ AZ で構築してみてください
  - 手順:
    1. VPC を作成
    2. Internet Gateway(IGW)を作成した VPC にアタッチ
    3. マルチ AZ のサブネットを作成(合計 4 つ)
    4. パブリック用ルートテーブルを作成して IGW へのルーティングを作成しパブリックサブネットを連携
    5. プライベート用ルートテーブルを作成しプライベートサブネットと連携
- パブリックサブネットに SSH 可能な EC2 インスタンスを立てて、アクセスしてみてください
  - 手順:
    1. SSH でしかアクセスできないセキュリティグループを作成
    2. パブリックサブネットに EC2 を作成してセキュリティグループを追加
    3. SSH でアクセス
- プライベートサブネットにも EC2 インスタンスを立てて、パブリックサブネットの EC2 インスタンスからのみプライベートサブネットの EC ２インスタンスに SSH でアクセスできるようにしてください
  - 手順:
    1. プライベートサブネットに EC2 を作成して上記セキュリティグループを追加
    2. SCP コマンドでパブリックサブネット内の EC2 にプライベートサブネット EC2 の秘密鍵を送信
    3. パブリックサブネット内の EC2 に SSH でログインして、プライベートサブネット内に EC2 に SSH でログイン
- プライベートサブネットに VPC の外から（自身のパソコンのターミナルなどから）アクセスできないことを確認してください
  - パブリックサブネットの EC2 にログインされていない状態で SSH コマンドでログイン
    - timeout が発生
